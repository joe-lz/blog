{"ast":null,"code":"var __jsx = React.createElement;\nimport Head from 'next/head';\nimport AV from 'leancloud-storage';\nimport dynamic from 'next/dynamic';\nimport { Table, Tag, Space, Modal, Form, Input, Button, Checkbox, notification } from 'antd';\nimport React, { useState, useEffect } from 'react';\nimport styles from './index.module.scss';\nimport Upload from 'src/components/admin/Upload';\nimport { createTopics, getTopicList, updateTopic } from 'src/service/topics';\n\nfunction AdminHome(props) {\n  const {\n    0: uploadShow,\n    1: setuploadShow\n  } = useState(false);\n  const {\n    0: title,\n    1: settitle\n  } = useState('');\n  const {\n    0: desc,\n    1: setdesc\n  } = useState('');\n  const {\n    0: list,\n    1: setlist\n  } = useState([]);\n\n  const update = async (item, params = {}) => {\n    await updateTopic({\n      topicItem: item,\n      params\n    });\n    setuploadShow(false);\n    notification.success({\n      message: '更新成功' // description: \"请输入用户名、密码\",\n\n    });\n    props.onChange();\n  };\n\n  return __jsx(\"div\", {\n    className: styles.item\n  }, __jsx(\"div\", {\n    className: styles.item_img,\n    onClick: () => {\n      setuploadShow(true);\n    },\n    style: {\n      backgroundImage: `url(${props.item.attributes.url})`\n    }\n  }, props.item.attributes.url ? '' : '上传'), __jsx(\"div\", {\n    className: styles.item_right\n  }, __jsx(\"p\", {\n    className: styles.title\n  }, props.item.attributes.title), __jsx(\"p\", {\n    className: styles.desc\n  }, props.item.attributes.desc), __jsx(Button, {\n    className: styles.btn,\n    size: \"small\",\n    type: \"primary\",\n    onClick: () => {\n      update(props.item, {\n        status: props.item.attributes.status === 1 ? 2 : 1\n      });\n    }\n  }, props.item.attributes.status === 1 ? '上线' : '下线')), __jsx(Modal, {\n    width: 900,\n    visible: uploadShow,\n    onCancel: () => {\n      setuploadShow(false);\n    },\n    onOk: () => {},\n    okText: \"\\u4FDD\\u5B58\",\n    cancelText: \"\\u53D6\\u6D88\",\n    bodyStyle: {\n      padding: 0,\n      maxHeight: 600,\n      overflowY: 'scroll',\n      position: 'relative'\n    },\n    footer: null\n  }, uploadShow && __jsx(Upload, {\n    onChoose: async ({\n      url\n    }) => {\n      update(props.item, {\n        url\n      });\n    }\n  })));\n}\n\nexport default AdminHome;","map":null,"metadata":{},"sourceType":"module"}