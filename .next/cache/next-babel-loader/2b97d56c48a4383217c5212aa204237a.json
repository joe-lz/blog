{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nvar __jsx = React.createElement;\nimport Head from \"next/head\";\nimport AV from \"leancloud-storage\";\nimport dynamic from \"next/dynamic\";\nimport { Table, Tag, Space, Button, notification } from \"antd\";\nimport React, { useState, useEffect } from \"react\";\nimport styles from \"./index.module.scss\";\nimport Layout from \"src/components/admin/Layout\";\nimport InputItem from \"src/components/admin/InputItem\";\nimport { getMyUserInfo, updateUserInfo } from \"src/service/user\";\n\nfunction AdminHome() {\n  var _useState = useState(0),\n      userinfoObj = _useState[0],\n      setuserinfoObj = _useState[1];\n\n  var _useState2 = useState(\"\"),\n      nickname = _useState2[0],\n      setnickname = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      avatar = _useState3[0],\n      setavatar = _useState3[1];\n\n  var _useState4 = useState(\"\"),\n      desc = _useState4[0],\n      setdesc = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      github = _useState5[0],\n      setgithub = _useState5[1];\n\n  var _useState6 = useState(\"\"),\n      social_link = _useState6[0],\n      setsocial_link = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      co_name = _useState7[0],\n      setco_name = _useState7[1];\n\n  var _useState8 = useState(\"\"),\n      position = _useState8[0],\n      setposition = _useState8[1];\n\n  var _useState9 = useState(\"\"),\n      city = _useState9[0],\n      setcity = _useState9[1];\n\n  var _useState10 = useState(\"\"),\n      email = _useState10[0],\n      setemail = _useState10[1]; // 更新\n\n\n  var handlesubmit = function handlesubmit() {\n    return _regeneratorRuntime.async(function handlesubmit$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(updateUserInfo({\n              userinfoItem: userinfoObj,\n              params: {\n                nickname: nickname,\n                avatar: avatar,\n                desc: desc,\n                github: github,\n                social_link: social_link,\n                co_name: co_name,\n                position: position,\n                city: city,\n                email: email\n              }\n            }));\n\n          case 2:\n            getData();\n            notification.success({\n              message: \"更新成功\" // description: \"请输入用户名、密码\",\n\n            });\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var getData = function getData() {\n    var res;\n    return _regeneratorRuntime.async(function getData$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _regeneratorRuntime.awrap(getMyUserInfo());\n\n          case 2:\n            res = _context2.sent;\n            setuserinfoObj(res);\n            setnickname(res.attributes.nickname);\n            setavatar(res.attributes.avatar);\n            setdesc(res.attributes.desc);\n            setgithub(res.attributes.github);\n            setsocial_link(res.attributes.social_link);\n            setco_name(res.attributes.co_name);\n            setposition(res.attributes.position);\n            setcity(res.attributes.city);\n            setemail(res.attributes.email);\n\n          case 13:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  useEffect(function () {\n    getData();\n  }, []);\n  return __jsx(Layout, null, __jsx(\"div\", {\n    className: \"_admin_body_section_block\",\n    style: {\n      padding: 30\n    }\n  }, __jsx(\"div\", {\n    className: styles.user\n  }, __jsx(InputItem, {\n    title: \"\\u6635\\u79F0\",\n    placeholder: \"\\u8BF7\\u8F93\\u5165\\u6635\\u79F0\",\n    value: nickname,\n    onChange: function onChange(e) {\n      setnickname(e);\n    }\n  }), __jsx(InputItem, {\n    title: \"\\u5934\\u50CF\",\n    type: \"image\",\n    placeholder: \"\\u8BF7\\u8F93\\u5165\\u6635\\u79F0\",\n    value: avatar,\n    onChange: function onChange(e) {\n      setavatar(e);\n    }\n  }), __jsx(InputItem, {\n    title: \"\\u7B80\\u4ECB\",\n    placeholder: \"\\u8BF7\\u8F93\\u5165\\u7B80\\u4ECB\",\n    value: desc,\n    onChange: function onChange(e) {\n      setdesc(e);\n    }\n  }), __jsx(InputItem, {\n    title: \"\\u6240\\u5728\\u57CE\\u5E02\",\n    placeholder: \"\\u8BF7\\u8F93\\u5165\\u6240\\u5728\\u57CE\\u5E02\",\n    value: city,\n    onChange: function onChange(e) {\n      setcity(e);\n    }\n  }))), __jsx(\"div\", {\n    className: \"_admin_body_section_block\",\n    style: {\n      padding: 30\n    }\n  }, __jsx(\"div\", {\n    className: styles.user\n  }, __jsx(InputItem, {\n    title: \"\\u793E\\u4EA4\\u8D26\\u53F7\",\n    placeholder: \"\\u8BF7\\u8F93\\u5165\\u793E\\u4EA4\\u8D26\\u53F7\",\n    value: social_link,\n    onChange: function onChange(e) {\n      setsocial_link(e);\n    }\n  }), __jsx(InputItem, {\n    title: \"Github\",\n    placeholder: \"\\u8BF7\\u8F93\\u5165Github\",\n    value: github,\n    onChange: function onChange(e) {\n      setgithub(e);\n    }\n  }), __jsx(InputItem, {\n    title: \"Email\",\n    placeholder: \"\\u8BF7\\u8F93\\u5165Email\",\n    value: email,\n    onChange: function onChange(e) {\n      setemail(e);\n    }\n  }))), __jsx(\"div\", {\n    className: \"_admin_body_section_block\",\n    style: {\n      padding: 30\n    }\n  }, __jsx(\"div\", {\n    className: styles.user\n  }, __jsx(InputItem, {\n    title: \"\\u516C\\u53F8\\u540D\\u79F0\",\n    placeholder: \"\\u8BF7\\u8F93\\u5165\\u516C\\u53F8\\u540D\\u79F0\",\n    value: co_name,\n    onChange: function onChange(e) {\n      setco_name(e);\n    }\n  }), __jsx(InputItem, {\n    title: \"\\u804C\\u4E1A\",\n    placeholder: \"\\u8BF7\\u8F93\\u5165\\u804C\\u4E1A\",\n    value: position,\n    onChange: function onChange(e) {\n      setposition(e);\n    }\n  }))), __jsx(Button, {\n    type: \"primary\",\n    size: \"large\",\n    onClick: function onClick() {\n      handlesubmit();\n    }\n  }, \"\\u4FDD\\u5B58\"));\n}\n\nexport default AdminHome;","map":null,"metadata":{},"sourceType":"module"}