{"ast":null,"code":"var __jsx = React.createElement;\nimport Head from 'next/head';\nimport AV from 'leancloud-storage';\nimport dynamic from 'next/dynamic';\nimport { Table, Tag, Space, Modal, Form, Input, Button, Checkbox, notification } from 'antd';\nimport React, { useState, useEffect } from 'react';\nimport styles from './index.module.scss';\nimport Layout from 'src/components/admin/Layout';\nimport TopicItem from 'src/components/admin/TopicItem';\nimport { createTopics, getTopicList, updateTopic } from 'src/service/topics';\n\nfunction AdminHome() {\n  const {\n    0: modalShow,\n    1: setmodalShow\n  } = useState(false);\n  const {\n    0: title,\n    1: settitle\n  } = useState('');\n  const {\n    0: desc,\n    1: setdesc\n  } = useState('');\n  const {\n    0: list,\n    1: setlist\n  } = useState([]);\n  const {\n    0: status,\n    1: setstatus\n  } = useState(1);\n\n  const handleCreate = async () => {\n    if (list.length > 20) {\n      notification.error({\n        message: '话题不能超过20个' // description: \"请输入用户名、密码\",\n\n      });\n      return;\n    }\n\n    if (!title) {\n      notification.error({\n        message: '请输入标题' // description: \"请输入用户名、密码\",\n\n      });\n      return;\n    }\n\n    await createTopics({\n      title,\n      desc\n    });\n    setmodalShow(false);\n    getlist({\n      status\n    });\n    notification.success({\n      message: '操作成功' // description: \"请输入用户名、密码\",\n\n    });\n  };\n\n  const getlist = async (params = {}) => {\n    const res = await getTopicList(params);\n    setlist(res);\n  };\n\n  const handleNavChange = async params => {\n    setstatus(params.status);\n  };\n\n  useEffect(() => {\n    getlist({\n      status\n    });\n  }, [status]);\n  return __jsx(Layout, null, __jsx(\"p\", {\n    className: \"_admin_body_section_title\"\n  }, \"\\u8BDD\\u9898\\u8BBE\\u7F6E\"), __jsx(\"div\", {\n    className: styles.topics\n  }, __jsx(\"div\", {\n    className: \"_admin_body_section_block\"\n  }, __jsx(\"div\", {\n    className: \"_admin_body_section_block_nav\"\n  }, __jsx(\"span\", {\n    className: status === 1 ? '_admin_body_section_block_nav_item_active' : '_admin_body_section_block_nav_item',\n    onClick: () => {\n      handleNavChange({\n        status: 1\n      });\n    }\n  }, \"\\u672A\\u4E0A\\u7EBF\"), __jsx(\"span\", {\n    className: status === 2 ? '_admin_body_section_block_nav_item_active' : '_admin_body_section_block_nav_item',\n    onClick: () => {\n      handleNavChange({\n        status: 2\n      });\n    }\n  }, \"\\u5DF2\\u4E0A\\u7EBF\"))), list && list.length > 0 && __jsx(\"div\", {\n    className: \"_admin_body_section_block\",\n    style: {\n      padding: 30\n    }\n  }, __jsx(\"div\", {\n    className: styles.list\n  }, list.map(obj => {\n    return __jsx(TopicItem, {\n      key: obj.id,\n      item: obj,\n      onChange: () => {\n        getlist({\n          status\n        });\n      }\n    });\n  }))), __jsx(Button, {\n    type: \"primary\",\n    size: \"large\",\n    onClick: () => {\n      setmodalShow(true);\n    }\n  }, \"+ \\u65B0\\u5EFA\\u8BDD\\u9898\"), __jsx(Modal, {\n    title: \"\\u521B\\u5EFA\\u8BDD\\u9898\",\n    width: 500,\n    visible: modalShow,\n    onCancel: () => {\n      setmodalShow(false);\n    },\n    onOk: () => {\n      handleCreate();\n    },\n    okText: \"\\u4FDD\\u5B58\",\n    cancelText: \"\\u53D6\\u6D88\"\n  }, __jsx(\"div\", null, __jsx(Form, {\n    labelCol: {\n      span: 5\n    },\n    wrapperCol: {\n      span: 19\n    },\n    name: \"basic\",\n    initialValues: {\n      remember: true\n    },\n    onFinish: () => {},\n    onFinishFailed: () => {}\n  }, __jsx(Form.Item, {\n    label: \"\\u8BDD\\u9898\\u540D\\u79F0\",\n    name: \"title\",\n    rules: [{\n      required: true,\n      message: '请输入话题名称'\n    }]\n  }, __jsx(Input, {\n    value: title,\n    onChange: e => {\n      settitle(e.target.value);\n    }\n  })), __jsx(Form.Item, {\n    label: \"\\u8BDD\\u9898\\u63CF\\u8FF0\",\n    name: \"desc\",\n    rules: [{\n      required: false,\n      message: '请输入话题描述'\n    }]\n  }, __jsx(Input, {\n    value: desc,\n    onChange: e => {\n      setdesc(e.target.value);\n    }\n  })))))));\n}\n\nexport default AdminHome;","map":null,"metadata":{},"sourceType":"module"}