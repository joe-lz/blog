{"ast":null,"code":"var __jsx = React.createElement;\nimport Head from \"next/head\";\nimport AV from \"leancloud-storage\";\nimport dynamic from \"next/dynamic\";\nimport { Table, Tag, Space, Button, notification } from \"antd\";\nimport React, { useState, useEffect } from \"react\";\nimport styles from \"./index.module.scss\";\nimport Layout from \"src/components/admin/Layout\";\nimport InputItem from \"src/components/admin/InputItem\";\nimport { getMyUserInfo, updateUserInfo } from \"src/service/user\";\n\nfunction AdminHome() {\n  const {\n    0: userinfoObj,\n    1: setuserinfoObj\n  } = useState(0);\n  const {\n    0: nickname,\n    1: setnickname\n  } = useState(\"\");\n  const {\n    0: avatar,\n    1: setavatar\n  } = useState(\"\");\n  const {\n    0: desc,\n    1: setdesc\n  } = useState(\"\");\n  const {\n    0: github,\n    1: setgithub\n  } = useState(\"\");\n  const {\n    0: social_link,\n    1: setsocial_link\n  } = useState(\"\");\n  const {\n    0: co_name,\n    1: setco_name\n  } = useState(\"\");\n  const {\n    0: position,\n    1: setposition\n  } = useState(\"\");\n  const {\n    0: city,\n    1: setcity\n  } = useState(\"\");\n  const {\n    0: email,\n    1: setemail\n  } = useState(\"\"); // 更新\n\n  const handlesubmit = async () => {\n    await updateUserInfo({\n      userinfoItem: userinfoObj,\n      params: {\n        nickname,\n        avatar,\n        desc,\n        github,\n        social_link,\n        co_name,\n        position,\n        city,\n        email\n      }\n    });\n    getData();\n    notification.success({\n      message: \"更新成功\" // description: \"请输入用户名、密码\",\n\n    });\n  };\n\n  const getData = async () => {\n    const res = await getMyUserInfo();\n    setuserinfoObj(res);\n    setnickname(res.attributes.nickname);\n    setavatar(res.attributes.avatar);\n    setdesc(res.attributes.desc);\n    setgithub(res.attributes.github);\n    setsocial_link(res.attributes.social_link);\n    setco_name(res.attributes.co_name);\n    setposition(res.attributes.position);\n    setcity(res.attributes.city);\n    setemail(res.attributes.email);\n  };\n\n  useEffect(() => {\n    getData();\n  }, []);\n  return __jsx(Layout, null, __jsx(\"div\", {\n    className: \"_admin_body_section_block\",\n    style: {\n      padding: 30\n    }\n  }, __jsx(\"div\", {\n    className: styles.user\n  }, __jsx(InputItem, {\n    title: \"\\u6635\\u79F0\",\n    placeholder: \"\\u8BF7\\u8F93\\u5165\\u6635\\u79F0\",\n    value: nickname,\n    onChange: e => {\n      setnickname(e);\n    }\n  }), __jsx(InputItem, {\n    title: \"\\u5934\\u50CF\",\n    type: \"image\",\n    placeholder: \"\\u8BF7\\u8F93\\u5165\\u6635\\u79F0\",\n    value: avatar,\n    onChange: e => {\n      setavatar(e);\n    }\n  }), __jsx(InputItem, {\n    title: \"\\u7B80\\u4ECB\",\n    placeholder: \"\\u8BF7\\u8F93\\u5165\\u7B80\\u4ECB\",\n    value: desc,\n    onChange: e => {\n      setdesc(e);\n    }\n  }), __jsx(InputItem, {\n    title: \"\\u6240\\u5728\\u57CE\\u5E02\",\n    placeholder: \"\\u8BF7\\u8F93\\u5165\\u6240\\u5728\\u57CE\\u5E02\",\n    value: city,\n    onChange: e => {\n      setcity(e);\n    }\n  }))), __jsx(\"div\", {\n    className: \"_admin_body_section_block\",\n    style: {\n      padding: 30\n    }\n  }, __jsx(\"div\", {\n    className: styles.user\n  }, __jsx(InputItem, {\n    title: \"\\u793E\\u4EA4\\u8D26\\u53F7\",\n    placeholder: \"\\u8BF7\\u8F93\\u5165\\u793E\\u4EA4\\u8D26\\u53F7\",\n    value: social_link,\n    onChange: e => {\n      setsocial_link(e);\n    }\n  }), __jsx(InputItem, {\n    title: \"Github\",\n    placeholder: \"\\u8BF7\\u8F93\\u5165Github\",\n    value: github,\n    onChange: e => {\n      setgithub(e);\n    }\n  }), __jsx(InputItem, {\n    title: \"Email\",\n    placeholder: \"\\u8BF7\\u8F93\\u5165Email\",\n    value: email,\n    onChange: e => {\n      setemail(e);\n    }\n  }))), __jsx(\"div\", {\n    className: \"_admin_body_section_block\",\n    style: {\n      padding: 30\n    }\n  }, __jsx(\"div\", {\n    className: styles.user\n  }, __jsx(InputItem, {\n    title: \"\\u516C\\u53F8\\u540D\\u79F0\",\n    placeholder: \"\\u8BF7\\u8F93\\u5165\\u516C\\u53F8\\u540D\\u79F0\",\n    value: co_name,\n    onChange: e => {\n      setco_name(e);\n    }\n  }), __jsx(InputItem, {\n    title: \"\\u804C\\u4E1A\",\n    placeholder: \"\\u8BF7\\u8F93\\u5165\\u804C\\u4E1A\",\n    value: position,\n    onChange: e => {\n      setposition(e);\n    }\n  }))), __jsx(Button, {\n    type: \"primary\",\n    size: \"large\",\n    onClick: () => {\n      handlesubmit();\n    }\n  }, \"\\u4FDD\\u5B58\"));\n}\n\nexport default AdminHome;","map":null,"metadata":{},"sourceType":"module"}