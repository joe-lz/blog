{"ast":null,"code":"import AV from 'leancloud-storage';\nexport var createArticle = function createArticle(params) {\n  return new Promise(function (resolve, reject) {\n    var articles = new AV.Object('CMS_Articles');\n    articles.set('status', 1); // articles.set('user', AV.User.current())\n\n    Object.keys(params).map(function (keyname) {\n      articles.set(keyname, params[keyname]);\n    }); // 将对象保存到云端\n\n    articles.save().then(function (res) {\n      resolve(res);\n    }, function (error) {\n      // 异常处理\n      reject(error);\n    });\n  });\n};\nexport var updateArticle = function updateArticle(_ref) {\n  var articleItem = _ref.articleItem,\n      params = _ref.params;\n  return new Promise(function (resolve, reject) {\n    // articleItem.set(\"articleVal\", articleVal);\n    // articleItem.set(\"title\", articleTitle);\n    if (params.views) {\n      articleItem.increment('views', params.views);\n    } else if (params.collects) {\n      articleItem.increment('collects', params.collects);\n    } else if (params.likes) {\n      articleItem.increment('likes', params.likes);\n    } else {\n      Object.keys(params).map(function (keyname) {\n        articleItem.set(keyname, params[keyname]);\n      });\n    }\n\n    articleItem.save().then(function (res) {\n      resolve(res);\n    }, function (error) {\n      // 异常处理\n      reject(error);\n    });\n  });\n};\nexport var getArticleList = function getArticleList() {\n  var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return new Promise(function (resolve, reject) {\n    var query = new AV.Query('CMS_Articles');\n    query.descending('createdAt');\n    query.include('author');\n    query.limit(50);\n    Object.keys(params).map(function (keyname) {\n      query.equalTo(keyname, params[keyname]);\n    });\n    query.find().then(function (res) {\n      resolve(res);\n    })[\"catch\"](function (err) {\n      reject(err);\n    });\n  });\n};\nexport var getArticleById = function getArticleById(_ref2) {\n  var id = _ref2.id;\n  return new Promise(function (resolve, reject) {\n    var query = new AV.Query('CMS_Articles');\n    query.include('author');\n    query.get(id).then(function (res) {\n      resolve(res);\n    })[\"catch\"](function (err) {\n      reject(err);\n    });\n  });\n};","map":null,"metadata":{},"sourceType":"module"}